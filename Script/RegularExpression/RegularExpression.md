# Regular Expression / 正则表达式

---

## 正则表达式精要

---

### 正则表达式

视频讲解：[10分钟快速掌握正则表达式](https://www.bilibili.com/video/BV1da4y1p7iZ)

### 元字符

| # | 元字符 | 描述  | 
|:---:|:---:|---| 
| # | . | 匹配任意单个字符，除了换行符。 | 
| # | [ ] | 字符种类。匹配方括号内的任意字符。 | 
| # | [^ ] | 否定的字符种类。匹配除了方括号里的任意字符 | 
| # | * | 出现零次或多次（任意次）。匹配 >=0 个重复的在 * 号之前的字符。 | 
| # | + | 出现一次或多次（至少一次）。匹配 >=1个 重复的 + 号前的字符。
| # | ? | 标记?之前的字符为可选，出现零次或一次 | 
| # | {n,m} | 匹配num个大括号之前的字符或字符集 (n <= num <= m). | 
| # | (xyz) | 字符集，匹配与 xyz 完全相等的字符串. | 
| # | &#124; | 或运算符，匹配符号前或后的字符. | 
| # | \ | 转义字符，用于匹配一些保留的字符：<code>[ ] ( ) { } . * + ? ^ $ \ &#124;</code> | 
| # | ^ | 从开始行开始匹配。锚点。 | 
| # | $ | 从末端开始匹配。锚点。 | 
|<img width=50px/>|<img width=100px/>|<img width=500px/>

### 简写字符集

    预定义的一些常用字符类，本质上是 [] 的马甲。

| # |简写|描述|
|:---:|:----:|----|
| # | . | 除换行符外的所有字符 | 
| # | \d | 匹配数字： `[0-9]` | 
| # | \D | 匹配非数字： `[^\d]` | 
| # | \w | 匹配所有字母数字，等同于 `[a-zA-Z0-9_]` | 
| # | \W | 匹配所有非字母数字，即符号，等同于： `[^\w]` | 
| # | \s | 匹配所有空格字符，等同于： `[\t\n\f\r\p{Z}]` | 
| # | \S | 匹配所有非空格字符： `[^\s]` | 
| # | \f | 匹配一个换页符 | 
| # | \n | 匹配一个换行符 | 
| # | \r | 匹配一个回车符 | 
| # | \t | 匹配一个制表符 | 
| # | \v | 匹配一个垂直制表符 | 
| # | \p | 匹配 CR/LF（等同于 `\r\n`），用来匹配 DOS 行终止符 |
|<img width=50px/>|<img width=100px/>|<img width=500px/>

### 边界

    \b：单词边界（[a-zA-Z_0-9] 之外的字符）
    \B：非单词边界

### 如何区分贪婪和非贪婪

贪婪量词、非贪婪量词、支配性量词：

    在合法的情况下，正则会尽量地多去匹配字符，这就叫做贪心模式。
    如果我们希望正则尽量少地匹配字符，只要在表示数字的符号后面加上一个?
    （即：问号加在量词的后边，则表示非贪婪模式）。
    <.+>：默认贪婪匹配”任意字符”。
    <.+?>：懒惰匹配“任意字符”。

默认是贪婪模式；在量词后面直接加上一个问号？就是非贪婪模式。

    量词：{m,n}：m 到 n 个；
    *：任意多个；
    +：一个到多个；
    ？：0 或一个；
    . 表示除\n 之外的任意字符；
    * 表示匹配 0-无穷 ；
    + 表示匹配 1-无穷；
    (?=Expression) 顺序环视，
    (?=\\() 就是匹配正括号

懒惰模式正则：

    src=".*? (?=\\()) "

---

## 正则表达式提高

---

### 特殊字符

    \a：alert 字符
    \e：escape 字符
    \0：空字符

### 分组

    [] 方括号：表示范围内选择，
    {} 花括号：表示重复次数，
    () 圆括号：允许重复多个字符。

### 反向引用

反向引用标识正则表达式中的匹配组捕获的子字符串。

每个反向引用都由一个编号或名称来标识，并通过“\编号“表示法在正则规则中进行引用。

### 非捕获性分组

不是所有分组都能创建反向引用，有一种特别的分组称之为非捕获性分组，它不会创建反向引用，即可以避免保存括号内的匹配结果。

反之，就是捕获性分组。

要创建一个非捕获性分组，只要在分组的左括号的后面紧跟一个问号与冒号就行了 ((?:pattern))

### 前瞻

正向前瞻：

> 形式：(?=pattern) 所谓正向前瞻，意思就是：要匹配的字符串，后面必须紧跟着 pattern。

负向前瞻：

> 形式 (?!pattern) 和?=恰好相反，要求字符串的后面不能紧跟着某个 pattern。


---

## 正则表达式使用实例

---

### 匹配单行注释

```
//{1,2}[\s\S]*?\n
```

### 匹配文档注释

```
/\*{1,2}[\s\S]*?\*/
```

### 匹配不带 * 和数字的字符

```
^((?!\d|\*).)*$
```

### 匹配不包含特定字符的行

```
^((?!\d).)*$
```

### 匹配不带 * 和数字的非单空行

```
^[\s\S]{1}((?!\d|\*).)*\n
^[\s\S]?+((?!\d|\*).)*\n
```

### 匹配不带 * 的行和空白行

```
^((?!\d|\*).)*\n$
```

### 匹配 * 连着若干个空格

```
\*\s*
```

### 匹配纯数字的行

```
^[\d]+?$
```

---

## 中英文排版

---

### 中英文排版-中英文字符间加空格

```
([A-Za-z\+,!?])([\x{4e00}-\x{9fa5}])        $1 $2
([\x{4e00}-\x{9fa5}])([A-Za-z\+@])          $1 $2
```

### 中文排版-替换中文字符之间的单个空格

```
([\u4e00-\u9fa5]{1})\s{1}+([\u4e00-\u9fa5]{1})     $1$2 
```

### 中文排版-替换中文字符之间的多个空格

```
([\u4e00-\u9fa5]{1})\s+([\u4e00-\u9fa5]{1})        $1$2
```

---


---

参考链接：

- [learn-regex](https://github.com/ziishaned/learn-regex/blob/master/translations/README-cn.md)
- []()

---
